<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Historic Sites Collection</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
  <!-- Navigation -->
  <%- include('partials/navbar', { page: '/sites' }) %>

    <div class="max-w-6xl mx-auto bg-white shadow-md rounded-lg p-6 mt-10">
      <h2 class="text-2xl font-bold text-center mb-4">
        Historic Sites Collection (<%= sites.length %>)
      </h2>

      <!-- Filtering Options -->
      <div class="flex justify-center space-x-4 mb-6">
        <a href="/sites?region=Central Canada"
          class="px-4 py-2 bg-violet-500 text-white rounded-md hover:bg-violet-600">Central Canada</a>
        <a href="/sites?region=Atlantic Region"
          class="px-4 py-2 bg-violet-500 text-white rounded-md hover:bg-violet-600">Atlantic Region</a>
        <a href="/sites?region=Prairie Provinces"
          class="px-4 py-2 bg-violet-500 text-white rounded-md hover:bg-violet-600">Prairie Provinces</a>
        <a href="/sites?region=West Coast"
          class="px-4 py-2 bg-violet-500 text-white rounded-md hover:bg-violet-600">West Coast</a>
      </div>

      <!-- Site List -->
      <table class="w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-200 text-center">
            <th class="border border-gray-300 p-2">Image</th>
            <th class="border border-gray-300 p-2">Site Name</th>
            <th class="border border-gray-300 p-2">Date (Type)</th>
            <th class="border border-gray-300 p-2">Location</th>
            <th class="border border-gray-300 p-2">Region</th>
            <th class="border border-gray-300 p-2">Details</th>
          </tr>
        </thead>
        <tbody>
          <% if (sites.length> 0) { %>
            <% sites.forEach(site=> { %>
              <tr class="text-center">
                <td class="border border-gray-300 p-2">
                  <img src="<%= site.image %>" alt="Site Image" class="w-24 h-24 rounded-md">
                </td>
                <td class="border border-gray-300 p-2 font-bold">
                  <%= site.site %>
                </td>
                <td class="border border-gray-300 p-2">
                  Date: <%= site.date %> (<%= site.dateType %>)<br>
                      Designated: <%= site.designated %>
                </td>
                <td class="border border-gray-300 p-2">
                  <%= site.location %>,
                    <a href="/sites?province=<%= site.ProvinceOrTerritory.name %>" class="text-violet-600 underline">
                      <%= site.ProvinceOrTerritory.name %>
                    </a>
                </td>
                <td class="border border-gray-300 p-2">
                  <a href="/sites?region=<%= site.ProvinceOrTerritory.region %>" class="text-violet-600 underline">
                    <%= site.ProvinceOrTerritory.region %>
                  </a>
                </td>
                <td class="border border-gray-300 p-2">
                  <a href="/site/<%= site.siteId %>"
                    class="px-3 py-1 bg-green-500 text-white rounded-md hover:bg-green-600">
                    Details
                  </a>
                </td>
              </tr>
              <% }) %>
                <% } else { %>
                  <tr>
                    <td colspan="6" class="text-center text-gray-600 p-4">No sites available</td>
                  </tr>
                  <% } %>
        </tbody>
      </table>
    </div>
</body>

</html>